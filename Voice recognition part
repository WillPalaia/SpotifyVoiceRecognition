from vosk import Model, KaldiRecognizer

import pyaudio
from main import *

model = Model(r"C:\Hackathon")
recogizer = KaldiRecognizer(model, 16000)

mic = pyaudio.PyAudio()
stream = mic.open(rate = 16000, channels = 1, format = pyaudio.paFloat32, input = True, input_device_index = None,  frames_per_buffer = 8192)

stream.start_stream()

#could be when open Spotify
while True:
    data = stream.read(4096, False)
    if recogizer.AcceptWaveform(data):
        text = recogizer.Result()
        print(text)
    words = text.split()
    if len(words) <= 1:
        print('Please try again')
        continue

    #pause
    if text[0] == "artist":
            uri = get_artist_uri(spotify=spotify, name=name)
            play_artist(spotify=spotify, device_id=deviceID, uri=uri)
    if text[0] == "pause":
        #doing pause command idk bruv
    
    if text[0] == "next":
        #go to the next song
    
    if text[0] == "previous":
        #go to the previous song
        
    if text[0] == "play":
        if text[1] == "album":
            album_num = text[2:]
            #play_album
            uri = get_album_uri(spotify=spotify, name=name)
            play_album(spotify=spotify, device_id=deviceID, uri=uri)
        else:
            song_name = text[1:]
            if not song_name:
                #continue current song
                uri = continue_current_song(spotify=spotify, name=name)
                play_current(spotify=spotify, device_id=deviceID, uri=uri)
            else:
                #play the song
                uri = get_track_uri(spotify=spotify, name=name)
                play_track(spotify=spotify, device_id=deviceID, uri=uri)
    else:
        print('say either "pause", "next", "previous", "play", or "play album"')